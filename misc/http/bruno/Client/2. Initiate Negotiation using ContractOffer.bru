meta {
  name: 2. Initiate Negotiation using ContractOffer
  type: http
  seq: 5
}

post {
  url: {{consumer-api}}/automated/negotiateContract
  body: json
  auth: inherit
}

body:json {
  {
    "protocol": "dataspace-protocol-http",
    "counterPartyAddress": "{{provider-dsp}}",
    "contractOffer": {{offer}},
    "callbackAddresses": []
  }
}

vars:post-response {
  agreement-id: res.body.agreementId
}

settings {
  encodeUrl: true
  timeout: 0
}
