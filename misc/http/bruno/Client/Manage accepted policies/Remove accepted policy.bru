meta {
  name: Remove accepted policy
  type: http
  seq: 3
}

delete {
  url: {{consumer}}/automated/acceptedPolicies?policyDefinitionId=my-custom-policy-definition
  body: json
  auth: inherit
}

params:query {
  policyDefinitionId: my-custom-policy-definition
}

body:json {
  [
      {
          "id": "my-custom-policy-definition",
          "policy": {
              "permissions": [
                  {
                      "edctype": "dataspaceconnector:permission",
                      "uid": null,
                      "target": "-1379397334",
                      "action": {
                          "type": "USE",
                          "includedIn": null,
                          "constraint": null
                      },
                      "assignee": null,
                      "assigner": null,
                      "constraints": [],
                      "duties": []
                  }
              ],
              "prohibitions": [],
              "obligations": [],
              "extensibleProperties": {},
              "inheritsFrom": null,
              "assigner": null,
              "assignee": null,
              "target": "-1379397334",
              "@type": {
                  "@policytype": "set"
              }
          }
      }
  ]
}

settings {
  encodeUrl: true
}
